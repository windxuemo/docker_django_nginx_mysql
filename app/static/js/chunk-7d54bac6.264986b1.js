(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d54bac6"],{"049f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("div",{staticClass:"mirror"},[i("button",{on:{click:function(e){return t.handle_upload()}}},[t._v("上传文件")]),i("div",{staticClass:"list_box"},[i("div",{staticClass:"list_wrap"},t._l(t.list,(function(e,s){return i("div",{key:e.id,staticClass:"item_box"},[i("div",{staticClass:"close_box",on:{click:function(i){return t.handleDelete(e.id)}}},[i("i",{staticClass:"icon"})]),i("h5",{staticClass:"title"},[i("i",{staticClass:"icon"}),i("span",[t._v(t._s(t._f("spliceName")(e.firmware_name)))])]),i("dl",[i("dt",[t._v("厂商名称:")]),i("dd",[t._v(t._s(e.vendor))])]),i("dl",[i("dt",[t._v("文件大小:")]),i("dd",[t._v(t._s(t._f("timeFilter")(e.created_at)))])]),i("div",{staticClass:"btn_box"},[i("button",{staticClass:"btn1",on:{click:function(i){return t.editVendor(e.id,s)}}},[t._v("编辑")]),i("button",{staticClass:"btn2",on:{click:function(i){return t.downFile(e.id)}}},[t._v("下载")])])])})),0),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next,total",total:t.total,"page-size":t.items_per_page,"current-page":t.page},on:{"current-change":t.handleCurrentChange}})],1),i("Upload",{directives:[{name:"show",rawName:"v-show",value:t.upload,expression:"upload"}],ref:"upload_box",attrs:{fileType:t.fileType,isSimple:!0,isMirror:!0}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.delete_item,expression:"delete_item"}],staticClass:"delete_wrap"},[i("div",{staticClass:"delete_box"},[i("i",{staticClass:"close",on:{click:t.close}}),i("h5",[t._v("删除")]),i("p",[t._v("确定要删除本条数据吗？")]),i("div",{staticClass:"button_box"},[i("button",{on:{click:t.confirm}},[t._v("确定")]),i("button",{on:{click:t.close}},[t._v("取消")])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.edit_item,expression:"edit_item"}],staticClass:"edit_wrap"},[i("div",{staticClass:"edit_box"},[i("i",{staticClass:"close",on:{click:t.close_edit}}),i("div",{staticClass:"content"},[i("dl",[i("dt",[t._v("固件：")]),i("dd",[i("i",{staticClass:"el-icon-document",staticStyle:{"margin-right":"10px"}}),t._v(t._s(t.edit_file_name))])]),i("dl",[i("dt",[t._v("厂商：")]),i("dd",{staticClass:"vendor",staticStyle:{height:"40px"}},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.edit_vendor,callback:function(e){t.edit_vendor=e},expression:"edit_vendor"}})],1)])]),i("div",{staticClass:"button_box"},[i("button",{on:{click:t.confirm_edit}},[t._v("确定")]),i("button",{on:{click:t.close_edit}},[t._v("取消")])])])]),i("div",{staticClass:"foot_box"})],1)])},a=[],n=(i("d3b7"),i("159b"),i("ac1f"),i("5319"),i("d443")),o={name:"FirmwareUnpack",components:{Upload:n["a"]},data:function(){return{id:"",list:[],total:0,page:1,fileType:"",items_per_page:18,upload:!1,delete_item:!1,edit_item:!1,edit_file_name:"",edit_id:"",edit_vendor:""}},created:function(){this.getList()},methods:{getList:function(){var t=this,e={page:this.page,items_per_page:this.items_per_page};this.$Mirror.getMirrorList(e).then((function(e){200===e.status&&e.data&&(t.list=e.data.firmwares,t.total=e.data.total_items)}))},handle_upload:function(){this.fileType="",this.upload=!0},cancel:function(){this.upload=!1},uploads:function(t,e){var i=this,s=new FormData;t.forEach((function(t){s.append("files",t.raw)})),s.append("vendor",e),this.$Mirror.createMirror(s).then((function(t){if(200!==t.status||"上传成功"!==t.data.message)return i.$message({type:"warning",message:t.data.message});i.$message({type:"success",message:"上传成功"}),i.$refs.upload_box.closeDia(),i.getList()}))},handleDelete:function(t){this.delete_item=!0,this.id=t},close:function(){this.delete_item=!1,this.getList()},confirm:function(){var t=this;this.$Mirror.deleteMirror(this.id).then((function(e){200===e.status&&(t.$message({type:"success",message:"任务删除成功"}),t.close())}))},handleCurrentChange:function(t){this.page=t,this.getList()},editVendor:function(t,e){this.edit_item=!0,this.edit_id=t,this.edit_vendor=this.list[e].vendor,this.edit_file_name=this.list[e].firmware_name},close_edit:function(){this.edit_item=!1,this.getList()},confirm_edit:function(){var t=this;console.log(this.edit_id,this.edit_vendor);var e=new FormData;e.append("id",this.edit_id),e.append("vendor",this.edit_vendor),this.$Mirror.updataMirror(e).then((function(e){200===e.status&&"Update successful"===e.data.message&&(t.$message({type:"success",message:"编辑成功"}),t.edit_item=!1,t.getList())}))},downFile:function(t){window.open("api/repository/download-firmware/"+t+"/")}},filters:{timeFilter:function(t){return t=t.replace("T"," "),t.substring(0,19)},spliceName:function(t){return t.length<=24?t:t.substring(0,20)+"..."}}},d=o,c=(i("8c26"),i("6ec3"),i("2877")),r=Object(c["a"])(d,s,a,!1,null,"b9b33ed0",null);e["default"]=r.exports},"13a3":function(t,e,i){},"6ec3":function(t,e,i){"use strict";i("13a3")},"8c26":function(t,e,i){"use strict";i("e94e")},e94e:function(t,e,i){}}]);